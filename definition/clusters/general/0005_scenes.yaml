#status: done
#Special field: SceneExtensionSet
id: "0x0005"
name: Scenes
description: Attributes and commands for scene configuration and manipulation.
server:
    attr:
      - id: "0x0000"
        name: Scene Count
        type: u8
        access: r
        default: "0x00"
        required: true
        showas: hex
      - id: "0x0001"
        name: Current Scene
        type: u8
        access: r
        default: "0x00"
        required: true
        showas: hex
      - id: "0x0002"
        name: Current Group
        type: u16
        access: r
        default: "0x0000"
        required: true
        range: 0x0000,0xfff7
        showas: hex
      - id: "0x0003"
        name: Scene Valid
        type: bool
        access: r
        default: "0"
        required: true
      - id: "0x0004"
        name: Scene Name Support
        type: bmp8
        access: r
        default: "0"
        required: true
        bits:
            "7": "Names Supported"
      - id: "0x0005"
        name: Last ConfiguredBy
        type: uid
        access: r
    cmd:
      - id: "0x00"
        name: Add scene
        description: Add a scenes to the group.
        dir: recv
        required: m
        response: "0x00"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
          - id: "0x0002"
            name: Transition time
            type: u16
            default: "0x0000"
            required: true
            showas: hex
            unit: Seconds
          - id: "0x0003"
            name: Scene Name
            type: cstring
            required: true
          - id: "0x0004"
            name: Extension Field Sets
            description: |
                The format of each extension field set is a 16 bit field carrying the cluster ID,
                followed by an 8 bit length field and the set of scene extension fields specified
                in  the  relevant  cluster. The length field holds the length in octets of that
                extension field set. Extension field set format:
                {{clusterId1, length 1, {extension field set 1}}, {clusterId2, length 2, {extension field set 2}} ...}
                I.e. the field would be a repeating struct with [ClusterID uint16] [OctetLength uint8] [AttrID ...uint16]
            type: SceneExtensionSet # Special type

      - id: "0x01"
        name: View scene
        description: Views the scenes of a group.
        dir: recv
        required: m
        response: "0x01"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x02"
        name: Remove scene
        description: Removes a scenes of a group.
        dir: recv
        required: m
        response: "0x02"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x03"
        name: Remove all scenes
        description: Removes all scenes of a group.
        dir: recv
        required: m
        response: "0x03"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
      - id: "0x04"
        name: Store scene
        description: Stores a scene of a group for a device.
        dir: recv
        required: m
        response: "0x04"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x05"
        name: Recall scene
        description: Recalls a scene of a group for a device.
        dir: recv
        required: m
        response: "0x05"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x06"
        name: Get scene membership
        description: Get the scenes of a group for a device.
        dir: recv
        required: m
        response: "0x06"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
      - id: "0x40"
        name: Enhanced Add Scene
        description: Same as Add Scene, except that transition time is specified in 1/10 s
        dir: recv
        required: m
        response: "0x40"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
          - id: "0x0002"
            name: Transition time
            type: u16
            default: "0x0000"
            required: true
            showas: hex
            unit: Seconds
            multiplier: 0.1
          - id: "0x0003"
            name: Scene Name
            type: cstring
            required: true
          - id: "0x0004"
            name: Extension Field Sets
            type: SceneExtensionSet # Special type

      - id: "0x41"
        name: Enhanced View Scene
        description: Views the scenes of a group (returning transition time with 1/10s precision).
        dir: recv
        required: o
        response: "0x41"
        payloadattr:
          - id: "0x0000"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0001"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x42"
        name: Copy Scene
        required: o
        dir: recv
        response: "0x42"
        payloadattr:
          - id: "0x0000"
            name: Mode
            type: bmp8
            required: true
            bits:
              "0": "Copy All Scenes"
          - id: "0x0001"
            name: From Group ID
            type: u16
            required: true
            showas: hex
          - id: "0x0001"
            name: From Scene ID
            type: u8
            required: true
            showas: hex
          - id: "0x0001"
            name: To Group ID
            type: u16
            required: true
            showas: hex
          - id: "0x0001"
            name: To Scene ID
            type: u8
            required: true
            showas: hex

client:
    cmd:
      - id: "0x00"
        name: Add scene response
        description: Response to the add scene command.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x01"
        name: View scene response
        description: Response to the view scene command.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
          - id: "0x0003"
            name: Transition time
            type: u16
            default: "0x0000"
            required: true
            showas: dec
            unit: Seconds
          - id: "0x0004"
            name: Scene Name
            type: cstring
            required: true
          - id: "0x0005"
            name: Extension Field Sets
            type: SceneExtensionSet
            required: true
      - id: "0x02"
        name: Remove scene response
        description: Response to the remove scene command.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x03"
        name: Remove all scenes response
        description: Response to the remove all scenes command.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
      - id: "0x04"
        name: Store scene response
        description: Response to the store scene command.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x06"
        name: Get scene membership response
        description: Shows details about scene membership.
        dir: recv
        required: m
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Capacity
            type: u8
            default: "0x00"
            required: true
            showas: dec
          - id: "0x0002"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0003"
            name: Scene list
            type: set
            arraytype: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x40"
        name: Enhanced Add Scene response
        required: o
        dir: recv
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
      - id: "0x41"
        name: Enhanced View Scene response
        description: A scene description.
        dir: recv
        required: o
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex
          - id: "0x0003"
            name: Transition time
            type: u16
            default: "0x00"
            required: true
            unit: Seconds
            multiplier: 0.1
            showas: dec
          - id: "0x0004"
            name: Scene Name
            type: cstring
            required: true
          - id: "0x0005"
            name: Extension Field Sets
            type: SceneExtensionSet
            required: true
      - id: "0x42"
        name: Copy Scene Response
        required: o
        dir: recv
        payloadattr:
          - id: "0x0000"
            name: Status
            type: Status
            default: "0x00"
            required: true
          - id: "0x0001"
            name: From Group ID
            type: u16
            default: "0x0000"
            required: true
            showas: hex
          - id: "0x0002"
            name: From Scene ID
            type: u8
            default: "0x00"
            required: true
            showas: hex