#status: done
id: "0x0006"
name: On/Off
description: Attributes and commands for switching devices between 'On' and 'Off'
    states.

types:
  OnOff: &onOff
    id: "0x0000"
    name: On Off
    type: bool
    access: r
    default: "0"
    required: true
    report: true
    scene: 1
    values:
      "0x00": Off
      "0x01": On
  GlobalSceneControl: &globalSceneControl
    id: "0x4000"
    name: Global Scene Control
    type: bool
    access: r
    default: "0"
  OnTime: &onTime
    id: "0x4001"
    name: On Time
    type: u16
    access: r
    default: "0"
    unit: Seconds
    multiplier: 10
  OffWaitTime: &offWaitTime
    id: "0x4002"
    name: Off Wait Time
    type: u16
    access: r
    default: "0"
    unit: Seconds
    multiplier: 10
  PoweronOnOff: &poweronOnOff
    id: "0x4003"
    name: PowerOn On/Off
    type: enum8
    access: rw
    default: "0x01"
    values:
      "0x00": Off
      "0x01": On
      "0xFF": Previous
  EffectIdentifier: &effectIdentifier
    name: Effect Identifier
    description: when turning lights off
    type: enum8
    default: "0x00"
    required: true
    values:
      "0x00": Delayed all off
      "0x01": Dying light
  EffectVariant: &effectVariant
    name: Effect Variant
    description:
    type: enum8
    default: "0x00"
    required: true
    values:
      "0x00": Fade to off in 0.8 seconds / 20% dim up in 0.5 then fade to off in 1 second
      "0x01": No Fade
      "0x02": 50% dim down in 0.8s then fade off in 12s
  OnOffControl: &onOffControl
    name: On/off control
    description:
    type: bmp8
    default: "0x00"
    required: true
    bits:
      "0": Accept only when on
server:
    attr:
      - *onOff
      - *globalSceneControl
      - *onTime
      - *offWaitTime
      - *poweronOnOff
    cmd:
      - id: "0x00"
        name: Off
        description: On receipt of this command, a device shall enter its 'Off' state.
            This state is device dependent, but it is recommended that it is used
            for power off or similar functions.
        dir: recv
        required: m
      - id: "0x01"
        name: On
        description: On receipt of this command, a device shall enter its 'On' state.
            This state is device dependent, but it is recommended that it is used
            for power on or similar functions.
        dir: recv
        required: m
      - id: "0x02"
        name: Toggle
        description: On receipt of this command, if a device is in its ‘Off’ state
            it shall enter its 'On' state. Otherwise, if it is in its ‘On’ state it
            shall enter its 'Off' state.
        dir: recv
        required: m
      - id: "0x40"
        name: Off with effect
        dir: recv
        required: m
        payloadattr:
          - *effectIdentifier
          - *effectVariant
      - id: "0x41"
        name: On with recall global scene
        description: The on with recall global scene command allows the recall of
            the light settings when the light was turned off.
        dir: recv
        required: m
      - id: "0x42"
        name: On with timed off
        description: Allows lamps to be turned on for a specific duration with a guarded
            off duration so that should the lamp be subsequently switched off, further
            on with timed off commands, received during this time, are prevented from
            turning the lamps back on.
        dir: recv
        required: m
        payloadattr:
          - *onOffControl
          - *onTime
          - *offWaitTime
client: {}
